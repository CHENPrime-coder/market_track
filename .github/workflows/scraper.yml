name: Steam 市场价格抓取

# 触发器
on:
  # 1. 允许你手动在 "Actions" 标签页点击 "Run workflow" 来运行
  workflow_dispatch:
  
  # 2. 计划任务：每小时的第 0 分钟运行
  # (注意：GitHub Actions 的计划任务可能会有几分钟的延迟)
  schedule:
    - cron: '0 * * * *'

jobs:
  run-scraper:
    # 使用最新的 Ubuntu 虚拟机
    runs-on: ubuntu-latest

    steps:
      # 第一步：检出你的代码
      # 这一步会把你的 main.py 等文件下载到虚拟机中
      - name: 1. 检出代码 (Checkout code)
        uses: actions/checkout@v4

      # 第二步：设置 Python 环境
      - name: 2. 设置 Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      # 第三步：安装 Python 依赖库
      - name: 3. 安装依赖 (Install dependencies)
        run: |
          python -m pip install --upgrade pip
          pip install requests beautifulsoup4

      # 第四步：运行你的 Python 脚本
      - name: 4. 运行抓取脚本 (Run script)
        run: python main.py